<!DOCTYPE html>
<html>
<head>
    <title>Mi Humidifier Card</title>
    <script type="module" src="https://unpkg.com/lit@2.7.0/polyfill-support.js"></script>
    <script type="module" src="dist/ha-mi-humidifier-card.js"></script>
    <style>
        body {
            background: var(--ha-card-background, #1c1c1c);
            margin: 0;
            padding: 16px;
            height: 100vh;
            box-sizing: border-box;
            color: #fff;
        }
        .card-container {
            width: 350px;
            margin: 0 auto;
        }
        #error-message {
            color: red;
            text-align: center;
            margin-top: 16px;
            display: none;
        }
    </style>
</head>
<body>
    <div class="card-container">
        <ha-mi-humidifier-card
            .hass=${{
                states: {
                    'humidifier.demo_humidifier': {
                        state: 'on',
                        attributes: {
                            friendly_name: 'Mi Humidifier',
                            target_humidity: 50,
                            current_humidity: 45,
                        }
                    },
                    'binary_sensor.demo_humidifier_water_shortage_fault': {
                        state: 'off'
                    }
                },
                callService: (domain, service, data) => {
                    console.log('Service called:', { domain, service, data });
                }
            }}
            .config=${{
                entity: 'humidifier.demo_humidifier'
            }}
        ></ha-mi-humidifier-card>
    </div>
    <div id="error-message"></div>

    <script>
        window.customCards = [];
        window.onerror = function(msg, url, lineNo, columnNo, error) {
            console.error('Error: ' + msg + '\nURL: ' + url + '\nLine: ' + lineNo + '\nColumn: ' + columnNo + '\nError object: ' + JSON.stringify(error));
            document.getElementById('error-message').style.display = 'block';
            document.getElementById('error-message').textContent = 'Error loading card: ' + msg;
            return false;
        };
        window.addEventListener('load', function() {
            console.log('Page loaded');
            if (!customElements.get('ha-mi-humidifier-card')) {
                console.error('Card element not registered');
                document.getElementById('error-message').style.display = 'block';
                document.getElementById('error-message').textContent = 'Card element not loaded';
            }
        });
    </script>
</body>
</html> 